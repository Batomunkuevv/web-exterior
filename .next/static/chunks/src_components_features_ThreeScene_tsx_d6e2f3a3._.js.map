{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/batomunkuevv/Desktop/Work/Frontend/web-exterior/src/components/features/ThreeScene.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\n\nexport const ThreeScene = () => {\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        const MODEL_POSITION = new THREE.Vector3(0, 0, 0);\n        const ROTATION_CENTER = new THREE.Vector3(1.609383, -5.364124, -6.248453);\n        const CAMERA_RADIUS = 40;\n        const CAMERA_FOV = 74;\n        const CAMERA_HEIGHT_OFFSET = 10;\n        const CAMERA_WIDTH = 2048;\n        const CAMERA_HEIGHT = 2048;\n\n        const isTouchDevice = \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n        const CAMERA_ASPECT_RATIO = CAMERA_WIDTH / CAMERA_HEIGHT;\n        const VERTICAL_FOV = THREE.MathUtils.radToDeg(2 * Math.atan(Math.tan(THREE.MathUtils.degToRad(CAMERA_FOV) / 2) / CAMERA_ASPECT_RATIO));\n\n        let scene: THREE.Scene, camera: THREE.PerspectiveCamera, renderer: THREE.WebGLRenderer, modelGroup: THREE.Group;\n        const raycaster = new THREE.Raycaster();\n        const mouse = new THREE.Vector2();\n        let isDragging = false;\n        let mouseStartX = 0;\n        let mouseStartY = 0;\n        let hoveredObject: THREE.Object3D | null = null;\n\n        function init() {\n            const container = containerRef.current;\n            if (!container) return;\n\n            scene = new THREE.Scene();\n\n            camera = new THREE.PerspectiveCamera(CAMERA_FOV, container.clientWidth / container.clientHeight, 0.1, 1000);\n            camera.position.set(0, CAMERA_HEIGHT_OFFSET, CAMERA_RADIUS);\n\n            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n            renderer.setSize(container.clientWidth, container.clientHeight);\n            container.appendChild(renderer.domElement);\n\n            modelGroup = new THREE.Group();\n            modelGroup.position.copy(MODEL_POSITION);\n            scene.add(modelGroup);\n\n            const light = new THREE.HemisphereLight(0xffffff, 0x444444);\n            light.position.set(0, 20, 0);\n            scene.add(light);\n\n            const loader = new GLTFLoader();\n            loader.load(\"/models/ocluder.glb\", (gltf) => {\n                modelGroup.add(gltf.scene);\n            });\n\n            container.addEventListener(\"mousedown\", onMouseDown);\n            container.addEventListener(\"mousemove\", onMouseMove);\n            container.addEventListener(\"mouseup\", onMouseUp);\n            container.addEventListener(\"touchstart\", onTouchStart);\n            container.addEventListener(\"touchmove\", onTouchMove);\n            container.addEventListener(\"touchend\", onTouchEnd);\n            window.addEventListener(\"resize\", onWindowResize);\n        }\n\n        function onWindowResize() {\n            const container = containerRef.current;\n            if (!container) return;\n            camera.aspect = container.clientWidth / container.clientHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize(container.clientWidth, container.clientHeight);\n        }\n\n        function onMouseDown(e: MouseEvent) {\n            isDragging = true;\n            mouseStartX = e.clientX;\n            mouseStartY = e.clientY;\n        }\n\n        function onMouseMove(e: MouseEvent) {\n            if (isDragging) {\n                const deltaX = e.clientX - mouseStartX;\n                modelGroup.rotation.y += deltaX * 0.01;\n                mouseStartX = e.clientX;\n            }\n        }\n\n        function onMouseUp() {\n            isDragging = false;\n        }\n\n        function onTouchStart(e: TouchEvent) {\n            if (e.touches.length === 1) {\n                isDragging = true;\n                mouseStartX = e.touches[0].clientX;\n            }\n        }\n\n        function onTouchMove(e: TouchEvent) {\n            if (isDragging && e.touches.length === 1) {\n                const deltaX = e.touches[0].clientX - mouseStartX;\n                modelGroup.rotation.y += deltaX * 0.01;\n                mouseStartX = e.touches[0].clientX;\n            }\n        }\n\n        function onTouchEnd() {\n            isDragging = false;\n        }\n\n        function animate() {\n            requestAnimationFrame(animate);\n            renderer.render(scene, camera);\n        }\n\n        init();\n        animate();\n\n        return () => {\n            const container = containerRef.current;\n            if (container) {\n                container.removeEventListener(\"mousedown\", onMouseDown);\n                container.removeEventListener(\"mousemove\", onMouseMove);\n                container.removeEventListener(\"mouseup\", onMouseUp);\n                container.removeEventListener(\"touchstart\", onTouchStart);\n                container.removeEventListener(\"touchmove\", onTouchMove);\n                container.removeEventListener(\"touchend\", onTouchEnd);\n                container.removeChild(renderer.domElement);\n            }\n            renderer.dispose();\n        };\n    }, []);\n\n    return <div id=\"threejs-container\" ref={containerRef} style={{ width: \"100%\", height: \"100%\" }} />;\n};\n"],"names":[],"mappings":"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","debugId":null}}]
}