(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[808],{347:()=>{},5795:(e,t,r)=>{"use strict";r.d(t,{FloorPlan:()=>o});var n=r(5155),l=r(2115);let o=e=>{let{selectedFloor:t,selectedApartament:r,setSelectedApartament:o}=e,[i,c]=(0,l.useState)(null),s=async()=>{let e="/floors/".concat(t.occluderName,"/floor-plan.svg"),n=await fetch(e),l=await n.text();r&&(l=l.replace(RegExp('id="'.concat(r.id,'"'),"g"),'id="'.concat(r.id,'" class="selected-apartament"'))),c(l)};return((0,l.useEffect)(()=>{s()},[r]),i)?(0,n.jsx)("div",{onClick:e=>{let{target:r}=e;if(!(r instanceof SVGElement&&"path"===r.nodeName))return;let n=r.id;if(!n)return;let l=t.apartaments.find(e=>e.id===n);l&&o(l)},className:"floor-plan",dangerouslySetInnerHTML:{__html:i}}):null}},9168:(e,t,r)=>{"use strict";r.d(t,{$n:()=>a,Dp:()=>i.FloorPanel,sk:()=>l.FloorPlan,jN:()=>s,Xl:()=>n.ThreeScene});var n=r(9922),l=r(5795),o=r(5155),i=r(9917),c=r(2596);let s=e=>{let{iframeUrl:t,onClose:r}=e;return t?(0,o.jsxs)("div",{className:(0,c.A)("fixed inset-0 z-[100] bg-overlay flex items-center justify-center px-2 sm:px-6","transition-all duration-1000",{"opacity-100 pointer-events-auto":t,"opacity-0 pointer-events-none":!t}),onClick:r,children:[(0,o.jsx)("button",{className:"absolute top-[24px] right-[16px] text-white",children:(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M1 1L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M15 1L1 15",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})]})}),(0,o.jsx)("div",{className:"relative w-full max-w-[800px] bg-black rounded-xl shadow-xl overflow-hidden max-h-[90dvh]",onClick:e=>e.stopPropagation(),children:(0,o.jsx)("iframe",{src:t,className:"w-full h-[70dvh] sm:h-[600px] border-none rounded-xl",allow:"xr-spatial-tracking; gyroscope; accelerometer",allowFullScreen:!0})})]}):null},a=e=>{let{className:t,children:r,onClick:n,isDisabled:l=!1,...i}=e,s=(0,c.A)("py-[10px] px-[32px] w-full min-h-[calc(var(--index)*1.4)] flex items-center justify-center rounded-[10px] bg-white shadow-button uppercase","transition-all duration-300 hover:bg-black hover:text-white",t);return(0,o.jsx)("button",{type:"button",disabled:l,onClick:n,className:s,...i,children:r})}},9917:(e,t,r)=>{"use strict";r.d(t,{FloorPanel:()=>s});var n=r(5155),l=r(2596),o=r(2115),i=r(6766),c=r(9168);let s=e=>{let{selectedFloor:t,setSelectedFloor:r,isOpenFloorPanel:s,setIsOpenFloorPanel:a,selectedApartament:u,setSelectedApartament:d,setTourUrl:h}=e,p=t?"/floors/".concat(t.occluderName,"/floor-base.png"):null;return(0,o.useEffect)(()=>{t&&d(t.apartaments[0])},[t]),(0,n.jsxs)("div",{className:(0,l.A)("py-[calc(var(--index)*1.35)] px-[40px] z-[100] fixed top-[6.5vh] right-[40px] w-full max-w-[calc(var(--index)*13.2)] max-h-[calc(100%-56px)]","tb:pt-[5vh] tb:pb-[3vh] tb:px-[24px] tb:top-[16px] tb:right-1/2 tb:translate-x-1/2 tb:w-[calc(100%-32px)] tb:max-w-[360px] tb:max-h-[calc(100%-32px)]","bg-floor-panel border-2 border-yellow flex flex-col items-center text-center","overflow-auto transition-all duration-300",{"opacity-100 pointer-events-auto":s,"opacity-0 pointer-events-none":!s}),children:[(0,n.jsx)("button",{onClick:()=>{a(!1),setTimeout(()=>{r(null)},300)},className:"absolute top-[calc(var(--index)*0.7)] right-[calc(var(--index)*0.55)] w-[calc(var(--index)*0.55)] h-[calc(var(--index)*0.55)] text-black",children:(0,n.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M1 1L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M15 1L1 15",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})]})}),(0,n.jsx)("h2",{className:"mb-[calc(var(--index)*1.05)] text-[calc(var(--index)*1.05)] leading-[130%] tb:text-[calc(var(--index)*1.5)]",children:"1152 Lafayette Ave"}),(0,n.jsxs)("div",{className:"mb-[calc(var(--index)*1.6)] sm:mb-[calc(var(--index)*1.05)]",children:[(null==t?void 0:t.description)&&(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:t.description}}),(null==u?void 0:u.description)&&(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:u.description}})]}),p&&(0,n.jsxs)("div",{className:(0,l.A)("mx-[-40px] mb-[32px] w-[calc(100%+80px)] max-h-[54vh] overflow-hidden relative","tb:mx-[-24px] tb:w-[calc(100%+48px)]"),children:[(0,n.jsx)("div",{className:"pt-[139.28%]"}),(0,n.jsx)(i.default,{className:"object-contain",fill:!0,src:p,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",alt:"Apartament"}),t&&(0,n.jsx)(c.sk,{selectedFloor:t,selectedApartament:u,setSelectedApartament:d})]}),(0,n.jsx)(c.$n,{className:"mt-auto",onClick:()=>{u&&h(u.tourUrl)},children:"Explore 3d"})]})}},9922:(e,t,r)=>{"use strict";r.d(t,{ThreeScene:()=>p});var n=r(5155),l=r(2115),o=r(3264),i=r(7431),c=r(9311);let s=[{occluderName:"Ocluder_1",description:"1B - 2 bedroom",apartaments:[{id:"1",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"},{id:"2",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"}]},{occluderName:"Ocluder_2",description:"2B - 2 bedroom",apartaments:[{id:"1",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"},{id:"2",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"}]},{occluderName:"Ocluder_3",description:"3B - 2 bedroom",apartaments:[{id:"1",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"},{id:"2",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"}]},{occluderName:"Ocluder_4",description:"4B - 2 bedroom",apartaments:[{id:"1",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"},{id:"2",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"}]},{occluderName:"Ocluder_pent",description:"Pent - 2 bedroom",apartaments:[{id:"1",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"},{id:"2",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"}]}],a=new o.Pq0(0,0,0),u=new o.Pq0(1.609383,-5.364124,-6.248453),d=o.cj9.radToDeg(2*Math.atan(Math.tan(o.cj9.degToRad(37)/1))),h="ontouchstart"in window||navigator.maxTouchPoints>0,p=e=>{let{isLoading360:t,selectedFloor:r,setSelectedFloor:p,setSelectedApartament:m,setIsOpenFloorPanel:v}=e,f=(0,l.useRef)(null),w=(0,l.useRef)(null),x=(0,l.useRef)(null),b=(0,l.useRef)(null),g=(0,l.useRef)(null),k=(0,l.useRef)(new o.tBo),j=(0,l.useRef)(new o.I9Y),y=(0,l.useRef)(null),E=(0,l.useRef)(t),L=(0,l.useRef)(!1),M=(0,l.useRef)(0),N=(0,l.useRef)(0),C=(0,l.useRef)(36),W=(0,l.useRef)(!1),R=new o.Q1f("#4A90E2"),B=new o.Q1f("#0074D9"),D=()=>{var e;let t=y.current;t&&(null==(e=t.userData)?void 0:e.defaultMaterial)&&(t.material=t.userData.defaultMaterial,y.current=null)},T=(0,l.useRef)(null),_=e=>{var t;let r=s.find(t=>t.occluderName===e.name);r&&(D(),e.isMesh&&(null==(t=e.userData)?void 0:t.activeMaterial)&&(e.material=e.userData.activeMaterial,T.current=e),p(r),m(null),v(!0))},A=(0,l.useCallback)((e,t)=>{var r,n;if(!w.current||!x.current||!g.current||E.current)return;let l=w.current.domElement.getBoundingClientRect();j.current.x=(e-l.left)/l.width*2-1,j.current.y=-(2*((t-l.top)/l.height))+1,k.current.setFromCamera(j.current,x.current);let o=k.current.intersectObjects(g.current.children,!0);if(y.current){let e=y.current;(null==(r=e.userData)?void 0:r.defaultMaterial)&&(e.material=e.userData.defaultMaterial),y.current=null}if(o.length>0){let e=o[0].object;(null==(n=e.userData)?void 0:n.hoverMaterial)&&(e.material=e.userData.hoverMaterial,y.current=e)}},[]),I=(0,l.useCallback)(e=>{if(!L.current){let t=e.clientX-M.current,r=e.clientY-N.current;Math.sqrt(t*t+r*r)>5&&(L.current=!0)}A(e.clientX,e.clientY)},[A]),S=(0,l.useCallback)(e=>{if(1===e.touches.length){let t=e.touches[0].clientX-M.current,r=e.touches[0].clientY-N.current;Math.sqrt(t*t+r*r)>5&&(L.current=!0)}},[]),P=(0,l.useCallback)(e=>{L.current=!1,M.current=e.clientX,N.current=e.clientY},[]),U=(0,l.useCallback)(e=>{if(1===e.touches.length){let t=e.touches[0].clientX,r=e.touches[0].clientY;L.current=!1,M.current=t,N.current=r}},[]),X=(0,l.useCallback)(e=>{if(L.current||E.current)return;let t="touches"in e?e.touches[0].clientX:e.clientX,r="touches"in e?e.touches[0].clientY:e.clientY;if(!w.current||!x.current||!g.current)return;let n=w.current.domElement.getBoundingClientRect();j.current.x=(t-n.left)/n.width*2-1,j.current.y=-(2*((r-n.top)/n.height))+1,k.current.setFromCamera(j.current,x.current);let l=k.current.intersectObjects(g.current.children,!0);if(l.length>0){var o;let e=l[0].object;(null==(o=e.userData)?void 0:o.info)&&_(e)}},[]),F=()=>{if(W.current)return;W.current=!0;let e=window.CI360;if((null==e?void 0:e.getActiveIndexByID)&&x.current){let t=e.getActiveIndexByID("product-360");if(void 0!==t){let e=-(t/C.current)*Math.PI*2,r=u.x+40*Math.sin(e),n=u.y+10,l=u.z+40*Math.cos(e);x.current.position.set(r,n,l),x.current.lookAt(u)}}W.current=!1},O=()=>{requestAnimationFrame(O),F(),w.current&&b.current&&x.current&&w.current.render(b.current,x.current)};(0,l.useEffect)(()=>{E.current=t},[t]),(0,l.useEffect)(()=>{let e=f.current;if(!e)return;let t=new o.Z58;b.current=t,x.current=new o.ubm(d,e.clientWidth/e.clientHeight,.1,1e3);let r=new i.JeP({antialias:!0,alpha:!0});r.setSize(e.clientWidth,e.clientHeight),e.appendChild(r.domElement),w.current=r;let n=new o.YJl;return t.add(n),g.current=n,new c.B().load("/models/ocluder.glb",e=>{let t=e.scene,r=new o.Q1f("#000");t.traverse(e=>{if(e.isMesh){let t=new o.V9B({color:r,transparent:!1,opacity:1,depthWrite:!0,depthTest:!0,colorWrite:!1,side:o.$EB}),n=new o.V9B({color:R,transparent:!0,opacity:.4,depthWrite:!1,depthTest:!0,side:o.hB5,blending:o.XIg}),l=new o.V9B({color:B,transparent:!0,opacity:.6,depthWrite:!1,depthTest:!0,side:o.hB5,blending:o.XIg});e.material=t,e.renderOrder=999,e.userData={info:"Occluder",defaultMaterial:t,hoverMaterial:n,activeMaterial:l}}}),t.position.copy(a),n.add(t)}),setTimeout(()=>{let e=document.querySelector(".cloudimage-360");C.current=parseInt((null==e?void 0:e.getAttribute("data-amount-x"))||"36")},100),O(),window.addEventListener("resize",()=>r.setSize(e.clientWidth,e.clientHeight)),()=>{window.removeEventListener("resize",()=>r.setSize(e.clientWidth,e.clientHeight)),w.current&&w.current.dispose()}},[]),(0,l.useEffect)(()=>(r?(window.removeEventListener("mousemove",I),window.removeEventListener("mousedown",P),window.removeEventListener("click",X),window.removeEventListener("touchstart",U),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",Y),D()):(window.addEventListener("mousedown",P),window.addEventListener("click",X),window.addEventListener("touchstart",U,{passive:!1}),window.addEventListener("touchmove",S,{passive:!1}),window.addEventListener("touchend",Y,{passive:!1}),h||window.addEventListener("mousemove",I)),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mousedown",P),window.removeEventListener("click",X),window.removeEventListener("touchstart",U),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",Y)}),[r]);let Y=e=>{if(1===e.changedTouches.length){let r=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;if(!w.current||!x.current||!g.current)return;let l=w.current.domElement.getBoundingClientRect();j.current.x=(r-l.left)/l.width*2-1,j.current.y=-(2*((n-l.top)/l.height))+1,k.current.setFromCamera(j.current,x.current);let o=k.current.intersectObjects(g.current.children,!0);if(o.length>0){var t;let e=o[0].object;(null==(t=e.userData)?void 0:t.info)&&_(e)}}};return(0,l.useEffect)(()=>{var e;null===r&&T.current&&(null==(e=T.current.userData)?void 0:e.defaultMaterial)&&(T.current.material=T.current.userData.defaultMaterial,T.current=null)},[r]),(0,n.jsx)("div",{ref:f,id:"threejs-container",className:"w-full h-full"})}}}]);