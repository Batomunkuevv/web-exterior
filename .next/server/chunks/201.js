exports.id=201,exports.ids=[201],exports.modules={795:(e,t,r)=>{"use strict";r.d(t,{FloorPlan:()=>l});var n=r(687),o=r(3210);let l=({selectedFloor:e,selectedApartament:t,setSelectedApartament:r})=>{let[l,s]=(0,o.useState)(null),i=(0,o.useCallback)(async()=>{let r=`/floors/${e.occluderName}/floor-plan.svg`,n=await fetch(r),o=await n.text();t&&(o=o.replace(RegExp(`id="${t.id}"`,"g"),`id="${t.id}" class="selected-apartament"`)),s(o)},[t,e.occluderName]);return((0,o.useEffect)(()=>{i()},[t,i]),l)?(0,n.jsx)("div",{onClick:t=>{let{target:n}=t;if(!(n instanceof SVGElement&&"path"===n.nodeName))return;let o=n.id;if(!o)return;let l=e.apartaments.find(e=>e.id===o);l&&r(l)},className:"floor-plan",dangerouslySetInnerHTML:{__html:l}}):null}},1135:()=>{},1608:(e,t,r)=>{"use strict";r.d(t,{ThreeScene:()=>n});let n=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call ThreeScene() from the server but ThreeScene is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/batomunkuevv/Desktop/Work/Frontend/web-exterior/src/app/components/features/ThreeScene.tsx","ThreeScene")},2028:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},2593:(e,t,r)=>{"use strict";r.d(t,{FloorPlan:()=>n});let n=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call FloorPlan() from the server but FloorPlan is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/batomunkuevv/Desktop/Work/Frontend/web-exterior/src/app/components/features/FloorPlan.tsx","FloorPlan")},3081:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>c});var n=r(7413),o=r(5986),l=r(5279),s=r.n(l);r(1135),r(1608),r(2593);let i=({children:e})=>(0,n.jsx)("div",{className:"flex flex-col overflow-clip min-h-screen",children:(0,n.jsx)("main",{className:"flex-1",children:e})});r(7005);let c={title:"360\xb0 View with 3D Model"},a=({children:e})=>(0,n.jsx)("html",{lang:"ru",children:(0,n.jsx)("body",{className:(0,o.A)(s().variable),children:(0,n.jsx)(i,{children:e})})})},6590:(e,t,r)=>{Promise.resolve().then(r.bind(r,2593)),Promise.resolve().then(r.bind(r,1608)),Promise.resolve().then(r.bind(r,7005))},6772:(e,t,r)=>{"use strict";r.d(t,{ThreeScene:()=>h});var n=r(687),o=r(3210),l=r(4546),s=r(2905),i=r(6376);let c=[{occluderName:"Ocluder_1",description:"1B - 2 bedroom",apartaments:[{id:"1",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"},{id:"2",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"}]},{occluderName:"Ocluder_2",description:"2B - 2 bedroom",apartaments:[{id:"1",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"},{id:"2",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"}]},{occluderName:"Ocluder_3",description:"3B - 2 bedroom",apartaments:[{id:"1",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"},{id:"2",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"}]},{occluderName:"Ocluder_4",description:"4B - 2 bedroom",apartaments:[{id:"1",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"},{id:"2",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"}]},{occluderName:"Ocluder_pent",description:"Pent - 2 bedroom",apartaments:[{id:"1",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"},{id:"2",description:"975 sf",tourUrl:"https://kuula.co/share/collection/7bysW?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1"}]}],a=new l.Pq0(0,0,0),u=new l.Pq0(1.609383,-5.364124,-6.248453),d=l.cj9.radToDeg(2*Math.atan(Math.tan(l.cj9.degToRad(37)/1))),h=({isLoading360:e,selectedFloor:t,setSelectedFloor:r,setSelectedApartament:h,setIsOpenFloorPanel:m})=>{let p=(0,o.useRef)(null),v=(0,o.useRef)(null),f=(0,o.useRef)(null),x=(0,o.useRef)(null),b=(0,o.useRef)(null),w=(0,o.useRef)(new l.tBo),g=(0,o.useRef)(new l.I9Y),k=(0,o.useRef)(null),j=(0,o.useRef)(e),y=(0,o.useRef)(!1),P=(0,o.useRef)(0),E=(0,o.useRef)(0),C=(0,o.useRef)(36),L=(0,o.useRef)(!1),M=new l.Q1f("#4A90E2"),N=new l.Q1f("#0074D9"),W=()=>{let e=k.current;e&&e.userData?.defaultMaterial&&(e.material=e.userData.defaultMaterial,k.current=null)},F=(0,o.useRef)(null),R=e=>{let t=c.find(t=>t.occluderName===e.name);t&&(W(),e.isMesh&&e.userData?.activeMaterial&&(e.material=e.userData.activeMaterial,F.current=e),r(t),h(null),m(!0))},D=(0,o.useCallback)((e,t)=>{if(!v.current||!f.current||!b.current||j.current)return;let r=v.current.domElement.getBoundingClientRect();g.current.x=(e-r.left)/r.width*2-1,g.current.y=-(2*((t-r.top)/r.height))+1,w.current.setFromCamera(g.current,f.current);let n=w.current.intersectObjects(b.current.children,!0);if(k.current){let e=k.current;e.userData?.defaultMaterial&&(e.material=e.userData.defaultMaterial),k.current=null}if(n.length>0){let e=n[0].object;e.userData?.hoverMaterial&&(e.material=e.userData.hoverMaterial,k.current=e)}},[]),T=(0,o.useCallback)(e=>{if(!y.current){let t=e.clientX-P.current,r=e.clientY-E.current;Math.sqrt(t*t+r*r)>5&&(y.current=!0)}D(e.clientX,e.clientY)},[D]),B=(0,o.useCallback)(e=>{if(!j.current&&1===e.touches.length){let t=e.touches[0].clientX-P.current,r=e.touches[0].clientY-E.current;Math.sqrt(t*t+r*r)>5&&(y.current=!0,W())}},[]),A=(0,o.useCallback)(e=>{y.current=!1,P.current=e.clientX,E.current=e.clientY},[]),S=(0,o.useCallback)(e=>{if(!j.current&&1===e.touches.length){let t=e.touches[0].clientX,r=e.touches[0].clientY;y.current=!1,P.current=t,E.current=r,W()}},[]),I=(0,o.useCallback)(e=>{if(y.current||j.current)return;let t="touches"in e?e.touches[0].clientX:e.clientX,r="touches"in e?e.touches[0].clientY:e.clientY;if(!v.current||!f.current||!b.current)return;let n=v.current.domElement.getBoundingClientRect();g.current.x=(t-n.left)/n.width*2-1,g.current.y=-(2*((r-n.top)/n.height))+1,w.current.setFromCamera(g.current,f.current);let o=w.current.intersectObjects(b.current.children,!0);if(o.length>0){let e=o[0].object;e.userData?.info&&R(e)}},[]),U=()=>{if(L.current)return;L.current=!0;let e=window.CI360;if(e?.getActiveIndexByID&&f.current){let t=e.getActiveIndexByID("product-360");if(void 0!==t){let e=-(t/C.current)*Math.PI*2,r=u.x+40*Math.sin(e),n=u.y+10,o=u.z+40*Math.cos(e);f.current.position.set(r,n,o),f.current.lookAt(u)}}L.current=!1},X=()=>{requestAnimationFrame(X),U(),v.current&&x.current&&f.current&&v.current.render(x.current,f.current)};(0,o.useEffect)(()=>{j.current=e},[e]),(0,o.useEffect)(()=>{let e=p.current;if(!e)return;let t=new l.Z58;x.current=t,f.current=new l.ubm(d,e.clientWidth/e.clientHeight,.1,1e3);let r=new s.JeP({antialias:!0,alpha:!0});r.setSize(e.clientWidth,e.clientHeight),e.appendChild(r.domElement),v.current=r;let n=new l.YJl;return t.add(n),b.current=n,new i.B().load("/models/ocluder.glb",e=>{let t=e.scene,r=new l.Q1f("#000");t.traverse(e=>{if(e.isMesh){let t=new l.V9B({color:r,transparent:!1,opacity:1,depthWrite:!0,depthTest:!0,colorWrite:!1,side:l.$EB}),n=new l.V9B({color:M,transparent:!0,opacity:.4,depthWrite:!1,depthTest:!0,side:l.hB5,blending:l.XIg}),o=new l.V9B({color:N,transparent:!0,opacity:.6,depthWrite:!1,depthTest:!0,side:l.hB5,blending:l.XIg});e.material=t,e.renderOrder=999,e.userData={info:"Occluder",defaultMaterial:t,hoverMaterial:n,activeMaterial:o}}}),t.position.copy(a),n.add(t)}),setTimeout(()=>{let e=document.querySelector(".cloudimage-360");C.current=parseInt(e?.getAttribute("data-amount-x")||"36")},100),X(),window.addEventListener("resize",()=>r.setSize(e.clientWidth,e.clientHeight)),()=>{window.removeEventListener("resize",()=>r.setSize(e.clientWidth,e.clientHeight)),v.current&&v.current.dispose()}},[]),(0,o.useEffect)(()=>(t?(window.removeEventListener("mousemove",T),window.removeEventListener("mousedown",A),window.removeEventListener("click",I),window.removeEventListener("touchstart",S),window.removeEventListener("touchmove",B),window.removeEventListener("touchend",_),W()):(window.addEventListener("mousedown",A),window.addEventListener("click",I),window.addEventListener("touchstart",S,{passive:!1}),window.addEventListener("touchmove",B,{passive:!1}),window.addEventListener("touchend",_,{passive:!1}),window.addEventListener("mousemove",T)),()=>{window.removeEventListener("mousemove",T),window.removeEventListener("mousedown",A),window.removeEventListener("click",I),window.removeEventListener("touchstart",S),window.removeEventListener("touchmove",B),window.removeEventListener("touchend",_)}),[t]);let _=e=>{if(!j.current&&1===e.changedTouches.length&&!y.current){let t=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY;if(!v.current||!f.current||!b.current)return;let n=v.current.domElement.getBoundingClientRect();g.current.x=(t-n.left)/n.width*2-1,g.current.y=-(2*((r-n.top)/n.height))+1,w.current.setFromCamera(g.current,f.current);let o=w.current.intersectObjects(b.current.children,!0);if(o.length>0){let e=o[0].object;e.userData?.info&&R(e)}}};return(0,o.useEffect)(()=>{null===t&&F.current&&F.current.userData?.defaultMaterial&&(F.current.material=F.current.userData.defaultMaterial,F.current=null)},[t]),(0,n.jsx)("div",{ref:p,id:"threejs-container",className:"w-full h-full"})}},7005:(e,t,r)=>{"use strict";r.d(t,{FloorPanel:()=>n});let n=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call FloorPanel() from the server but FloorPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/batomunkuevv/Desktop/Work/Frontend/web-exterior/src/app/components/ui/FloorPanel.tsx","FloorPanel")},8476:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},9638:(e,t,r)=>{Promise.resolve().then(r.bind(r,795)),Promise.resolve().then(r.bind(r,6772)),Promise.resolve().then(r.bind(r,9832))},9713:(e,t,r)=>{"use strict";r.d(t,{$n:()=>a,Dp:()=>s.FloorPanel,sk:()=>o.FloorPlan,jN:()=>c,Xl:()=>n.ThreeScene});var n=r(6772),o=r(795),l=r(687),s=r(9832),i=r(9384);let c=({iframeUrl:e,onClose:t})=>e?(0,l.jsxs)("div",{className:(0,i.A)("fixed inset-0 z-[100] bg-overlay flex items-center justify-center px-2 sm:px-6","transition-all duration-1000",{"opacity-100 pointer-events-auto":e,"opacity-0 pointer-events-none":!e}),onClick:t,children:[(0,l.jsx)("button",{className:"absolute top-[24px] right-[16px] text-white",children:(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M1 1L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M15 1L1 15",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})]})}),(0,l.jsx)("div",{className:"relative w-full max-w-[800px] bg-black rounded-xl shadow-xl overflow-hidden max-h-[90dvh]",onClick:e=>e.stopPropagation(),children:(0,l.jsx)("iframe",{src:e,className:"w-full h-[70dvh] sm:h-[600px] border-none rounded-xl",allow:"xr-spatial-tracking; gyroscope; accelerometer",allowFullScreen:!0})})]}):null,a=e=>{let{className:t,children:r,onClick:n,isDisabled:o=!1,...s}=e,c=(0,i.A)("py-[10px] px-[32px] w-full min-h-[calc(var(--index)*1.4)] flex items-center justify-center rounded-[10px] bg-white shadow-button uppercase","transition-all duration-300 hover:bg-black hover:text-white",t);return(0,l.jsx)("button",{type:"button",disabled:o,onClick:n,className:c,...s,children:r})}},9832:(e,t,r)=>{"use strict";r.d(t,{FloorPanel:()=>a});var n=r(687),o=r(9384),l=r(3210);let s=async()=>!1;var i=r(474),c=r(9713);let a=({selectedFloor:e,setSelectedFloor:t,isOpenFloorPanel:r,setIsOpenFloorPanel:a,selectedApartament:u,setSelectedApartament:d,setTourUrl:h})=>{let m=e?`/floors/${e.occluderName}/floor-base.png`:null,p=async()=>{u&&(await s()||console.warn("Пользователь не дал доступ к гироскопу"),h(u.tourUrl))};return(0,l.useEffect)(()=>{e&&d(e.apartaments[0])},[e,d]),(0,n.jsxs)("div",{className:(0,o.A)("py-[calc(var(--index)*1.35)] px-[40px] z-[100] fixed top-[6.5vh] right-[40px] w-full max-w-[calc(var(--index)*13.2)] max-h-[calc(100%-56px)]","tb:pt-[6vh] tb:pb-[3vh] tb:px-[24px] tb:top-[16px] tb:right-1/2 tb:translate-x-1/2 tb:w-[calc(100%-32px)] tb:max-w-[360px] tb:max-h-[calc(100%-32px)]","bg-floor-panel border-2 border-yellow flex flex-col items-center text-center","overflow-auto transition-all duration-300",{"opacity-100 pointer-events-auto":r,"opacity-0 pointer-events-none":!r}),children:[(0,n.jsx)("button",{onClick:()=>{a(!1),setTimeout(()=>{t(null)},300)},className:"absolute top-[calc(var(--index)*0.7)] right-[calc(var(--index)*0.55)] w-[calc(var(--index)*0.55)] h-[calc(var(--index)*0.55)] text-black tb:top-[calc(var(--index)*1)] tb:right-[calc(var(--index)*0.8)] tb:w-[calc(var(--index)*1.5)] tb:h-[calc(var(--index)*1.5)]",children:(0,n.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M1 1L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M15 1L1 15",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"})]})}),(0,n.jsx)("h2",{className:"mb-[calc(var(--index)*1.05)] text-[calc(var(--index)*1.05)] leading-[130%] tb:text-[calc(var(--index)*1.5)]",children:"1152 Lafayette Ave"}),(0,n.jsxs)("div",{className:"mb-[calc(var(--index)*1.6)] sm:mb-[calc(var(--index)*1.05)]",children:[e?.description&&(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:e.description}}),u?.description&&(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:u.description}})]}),m&&(0,n.jsxs)("div",{className:(0,o.A)("mx-[-40px] mb-[32px] w-[calc(100%+80px)] max-h-[54vh] overflow-hidden relative","tb:mx-[-24px] tb:w-[calc(100%+48px)]"),children:[(0,n.jsx)("div",{className:"pt-[139.28%]"}),(0,n.jsx)(i.default,{className:"object-contain",fill:!0,src:m,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",alt:"Apartament"}),e&&(0,n.jsx)(c.sk,{selectedFloor:e,selectedApartament:u,setSelectedApartament:d})]}),(0,n.jsx)(c.$n,{className:"mt-auto",onClick:p,children:"Explore 3d"})]})}}};