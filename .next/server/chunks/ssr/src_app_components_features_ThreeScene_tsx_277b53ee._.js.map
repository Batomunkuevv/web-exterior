{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/batomunkuevv/Desktop/Work/Frontend/web-exterior/src/app/components/features/ThreeScene.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\n\nexport const ThreeScene = () => {\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        const MODEL_POSITION = new THREE.Vector3(0, 0, 0);\n        const ROTATION_CENTER = new THREE.Vector3(1.609383, -5.364124, -6.248453);\n        const CAMERA_RADIUS = 40;\n        const CAMERA_FOV = 74;\n        const CAMERA_HEIGHT_OFFSET = 10;\n        const CAMERA_WIDTH = 2048;\n        const CAMERA_HEIGHT = 2048;\n\n        const isTouchDevice = \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n        const CAMERA_ASPECT_RATIO = CAMERA_WIDTH / CAMERA_HEIGHT;\n        const VERTICAL_FOV = THREE.MathUtils.radToDeg(2 * Math.atan(Math.tan(THREE.MathUtils.degToRad(CAMERA_FOV) / 2) / CAMERA_ASPECT_RATIO));\n\n        let scene: THREE.Scene, camera: THREE.PerspectiveCamera, renderer: THREE.WebGLRenderer, modelGroup: THREE.Group;\n        const raycaster = new THREE.Raycaster();\n        const mouse = new THREE.Vector2();\n        let isDragging = false;\n        let mouseStartX = 0;\n        let mouseStartY = 0;\n        let hoveredObject: THREE.Object3D | null = null;\n\n        function init() {\n            const container = containerRef.current;\n            if (!container) return;\n\n            scene = new THREE.Scene();\n\n            camera = new THREE.PerspectiveCamera(CAMERA_FOV, container.clientWidth / container.clientHeight, 0.1, 1000);\n            camera.position.set(0, CAMERA_HEIGHT_OFFSET, CAMERA_RADIUS);\n\n            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n            renderer.setSize(container.clientWidth, container.clientHeight);\n            container.appendChild(renderer.domElement);\n\n            modelGroup = new THREE.Group();\n            modelGroup.position.copy(MODEL_POSITION);\n            scene.add(modelGroup);\n\n            const light = new THREE.HemisphereLight(0xffffff, 0x444444);\n            light.position.set(0, 20, 0);\n            scene.add(light);\n\n            const loader = new GLTFLoader();\n            loader.load(\"/models/ocluder.glb\", (gltf) => {\n                modelGroup.add(gltf.scene);\n            });\n\n            container.addEventListener(\"mousedown\", onMouseDown);\n            container.addEventListener(\"mousemove\", onMouseMove);\n            container.addEventListener(\"mouseup\", onMouseUp);\n            container.addEventListener(\"touchstart\", onTouchStart);\n            container.addEventListener(\"touchmove\", onTouchMove);\n            container.addEventListener(\"touchend\", onTouchEnd);\n            window.addEventListener(\"resize\", onWindowResize);\n        }\n\n        function onWindowResize() {\n            const container = containerRef.current;\n            if (!container) return;\n            camera.aspect = container.clientWidth / container.clientHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize(container.clientWidth, container.clientHeight);\n        }\n\n        function onMouseDown(e: MouseEvent) {\n            isDragging = true;\n            mouseStartX = e.clientX;\n            mouseStartY = e.clientY;\n        }\n\n        function onMouseMove(e: MouseEvent) {\n            if (isDragging) {\n                const deltaX = e.clientX - mouseStartX;\n                modelGroup.rotation.y += deltaX * 0.01;\n                mouseStartX = e.clientX;\n            }\n        }\n\n        function onMouseUp() {\n            isDragging = false;\n        }\n\n        function onTouchStart(e: TouchEvent) {\n            if (e.touches.length === 1) {\n                isDragging = true;\n                mouseStartX = e.touches[0].clientX;\n            }\n        }\n\n        function onTouchMove(e: TouchEvent) {\n            if (isDragging && e.touches.length === 1) {\n                const deltaX = e.touches[0].clientX - mouseStartX;\n                modelGroup.rotation.y += deltaX * 0.01;\n                mouseStartX = e.touches[0].clientX;\n            }\n        }\n\n        function onTouchEnd() {\n            isDragging = false;\n        }\n\n        function animate() {\n            requestAnimationFrame(animate);\n            renderer.render(scene, camera);\n        }\n\n        init();\n        animate();\n\n        return () => {\n            const container = containerRef.current;\n            if (container) {\n                container.removeEventListener(\"mousedown\", onMouseDown);\n                container.removeEventListener(\"mousemove\", onMouseMove);\n                container.removeEventListener(\"mouseup\", onMouseUp);\n                container.removeEventListener(\"touchstart\", onTouchStart);\n                container.removeEventListener(\"touchmove\", onTouchMove);\n                container.removeEventListener(\"touchend\", onTouchEnd);\n                container.removeChild(renderer.domElement);\n            }\n            renderer.dispose();\n        };\n    }, []);\n\n    return <div id=\"threejs-container\" ref={containerRef} style={{ width: \"100%\", height: \"100%\" }} />;\n};\n"],"names":[],"mappings":"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","debugId":null}}]
}